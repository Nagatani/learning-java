---
title: クラス
sidebar_position: 5
---

メソッドとデータを関連付けて再利用する

## クラスとは
***「データの⼊れ物(状態)」と「処理」をまとめる*** 機能です。

現実世界でも、何らかの処理は、何らかの状態に依存することが多いです。
この状態と処理を関連付けてまとめ、1つの設計図としておき、それを実体化して利用することで再利用を行えるようにすることが目的です。

Javaは、クラスベースのオブジェクト指向言語です。
このクラスありきでオブジェクト指向設計を実現する言語ですので、このクラスの考え方がとても重要になってきます。

### C言語との照らし合わせ

C言語の構造体（struct）では、名前を持った変数を複数まとめて1つの変数として扱う機能があります。
構造体は単にデータの入れ物としての役割しかありませんが、データ同士を関連付けて管理できるメリットがあります。

Javaにおけるクラスは、「この構造体に関数を追加したもの」をイメージすると想像しやすくなります。

## クラスはオブジェクトの設計図

何らかの状態は実体化（インスタンス化）されたオブジェクトごとに異なります。

何らかの状態に対する処理内容（メソッド）はどの状態においても変わりがありません。
ただし、その処理によって得られる結果（戻り値）は状態によって異なります。

クラスは、どんな状態をどのように管理するかを先に決めておきます。これにより、それをもとにそれぞれのオブジェクトを生成することが可能です。

## クラスを宣言する
クラスの宣言（フィールドの宣言や、メソッドの宣言も含みます）には、以下の構文を使います。

```java
public class クラス名 {
  // クラス内変数（フィールド）
  修飾子 型名 フィールド名;

  // クラスのメソッド
  修飾子 戻り値の型 メソッド名(引数1の型 引数1名, 引数2の型 引数2名) {
    処理
    return 戻り値;
  }
}
```

## クラスによるプログラムの分割練習

`練習問題2-5`で行ったようなプログラムについて考えます。

5教科の点数と名前を別の配列に格納し、その合計点を算出してソートするプログラムについて、クラスを用いた役割分担を行ってみましょう。

### 生徒情報と点数を管理するクラスを作成する

課題では、生徒の名前と点数は別々の配列情報として管理されていました。

この状態だと、点数の並び替えを行った場合に”ずれないように気をつけて”生徒の名前の配列も同様に並び替える必要があります。
これでは、構築を少しでも間違えると別の生徒の点数が当て込まれてしまう危険性があります。

そこで提案したいのが、生徒の情報と点数の情報をまとめて管理してはどうか。ということです。

まず、生徒情報と点数を管理するクラス`Score`を作成します。

```java
public class Score {
}
```

このクラスには、生徒の名前である`name`をString型で、5教科の点数`subjects`をintの配列でもたせます。

```java
public class Score {
  String name = "";
  int[] subjects = new int[5];
}
```

これで、`Score`クラスは生徒名と点数を1つの型で管理できるようになりました。
追加した`name`、`subjects`はいわゆる状態に当たります。これらをクラスの***フィールド***と呼びます。


### 実際に作成したクラスを使ってみる

さきほど作成した`Score`クラスには、`main`メソッドを作成していません。
`main`メソッドは、実際に動かしたいプログラムにのみ追加します。`Scores`はあくまでデータの取りまとめの役割を担ってもらいたいので、あえて`main`メソッドは作成しません。そのかわりに、生徒の成績を取りまとめるクラスを作成して、そちらに`main`メソッドを持たせましょう。

`ScoresManager`クラスを作成します。`main`メソッドのみ用意し、`Score`クラスの実体として一人の生徒のデータを作成したうえで合計点の算出と出力を行います。

```java
public class ScoresManager {
  public static void main(String[] args) {
    Score s = new Score(); // 新しく生徒を作成
    s.name = "佐藤一郎";  // 名前の設定
    s.subjects = new int[]{100, 30, 90, 10, 60};  // 配列を生成して渡す

    // 合計点の算出
    int sum = 0;
    for (int subject : s.subjects) {
      sum += subject;
    }

    // 名前と合計点の出力
    System.out.println(s.name + ":" + sum);
  }
}
```

実行結果は次のようになります。

```
佐藤一郎:290
```

### 合計点の算出と名前と合計点の文字列を生成するメソッドの作成

`ScoresManager`の`main`に作成した合計点の算出と出力用データの生成を`Score`クラスに任せましょう。

```java
public class Score {
  String name = "";
  int[] subjects = new int[5];

  // 合計点の算出
  public int getSubjectsSummary() {
    int sum = 0;
    for (int subject : subjects) {
      sum += subject;
    }
    return sum;
  }

  // 「名前:合計点」の文字列を生成
  public String getScoreInfo() {
    return name + ":" + getSubjectsSummary();
  }
}
```

この変更により、合計点の算出や、出力形式を`ScoresManager`の`main`メソッドで行わなくて良くなりました。

```java
public class ScoresManager {
  public static void main(String[] args) {
    Score s = new Score(); // 新しく生徒を作成
    s.name = "佐藤一郎";  // 名前の設定
    s.subjects = new int[]{100, 30, 90, 10, 60};  // 配列を生成して渡す

    // 名前と合計点の出力
    System.out.println(s.getScoreInfo());
  }
}
```

出力結果は変わりません。

これで、`ScoresManager`の`main`メソッドでの合計点算出処理などを細かく指定することなく書け、シンプルな構成になりました。

クラスを作成して処理をお願いすることは、`main`メソッドのごちゃつきを抑え、シンプルでバグの発生確率を低下させる目的があります。

今回のような簡単なプログラムでは、逆にコード記述量が増えてしまっていて回りくどく手間が掛かっているように見えてしまいます。
しかし、大規模で複雑なプログラムや複数人と一緒に行うプロジェクトでは、クラスをできる限り細く分割し、それぞれのクラスの役割を果たすように設計・構築しましょう。そうすると、クラス1つが担う責任の所在を明らかにでき、大規模であればあるほどその恩恵を多大に得られます。

## まとめ
1. クラスは、***フィールド(状態)*** や、***メソッド(処理)*** を1つにまとめることができる。
    - 状態と処理をまとめることで、より整然としたプログラムの構成を考え、実現することができる。
2. オブジェクト指向プログラミング言語では、クラスを変数の型としてそのまま利用することができる。
    - 変数の型として使用する場合、プリミティブな変数や特殊なString型と異なり、`new`演算子により新規作成し代入する手順が必要となる。
