---
title: final修飾子
---

このタイミングでしか説明できなさそうなので差し込みます。

## final修飾子の目的

final修飾子を付けて宣言されたものは、宣言以降、代入、継承、オーバーライドなどによる変更ができないようになります。

変数の定数化の際にも使用されますが、オブジェクト自身が持つメソッドの動作などは可能であり、実際に使用する場合は注意してください。

## クラスにfinal修飾子を付けた場合

```java
public final class ClassName { ... }
```

このクラスは、インスタンス化等は可能だが、**継承** が不可能になります。
他のクラスで、`extends ClassName`とするとエラーとなります。

このクラスを継承して新たにサブクラスを作成させないようにするときに使用します。

## メソッドにfinal修飾子を付けた場合
```java
public final void methodName(int hoge) { ... }
```

このメソッドは、サブクラスにて**オーバーライド**ができなくなります。

サブクラスにて独自のメソッドとして上書きして欲しくない場合に使用します。

## プリミティブ型の変数(フィールド)に付けた場合
```java
private final int INT_VALUE = 758;
```
この変数（フィールド）は、**代入**が行えなくなり、**値の変更** ができなくなります。

定数値として定義したい場合に使用します。

また、定数値として定義された変数は、すべて大文字で表現しておくと分かりやすくて良いでしょう。

## クラス型の変数(フィールド)に付けた場合
```java
private final String strValue = "hogehoge";
```

この変数（フィールド）は、**再代入** が行えなくなります。

しかし、インスタンスが持つフィールドには代入が可能かつインスタンスが持つメソッドにて状態を変化させるメソッドを呼び出した際には、そのメソッドの機能に従い状態が変化します。

フィールドに対して初期値を渡した状態から再代入によって異なるものに変えてほしくない場合に使用します。


以下のソースコードを実行してみましょう

```java
public class IntValue {
    public int value;
    public add(int value) {
        this.value += value;
    }
}
public class FinalSample {
    public static void main(String[] args) {
        final IntValue i = new IntValue();
        i.value = 100;
        System.out.println(i.value);        //100と表示される
        i.add(50);
        System.out.println(i.value);        //150と表示される

        //↓これはエラー
        //i = new IntValue();
    }
}
```

```bash
100
150
```

と表示されます。

## 定数ではないので注意

変数宣言に`final`がついているからと言っても、それはオブジェクトすべてが定数になるわけではありません。

上で示したように、機能として内部の状態を変更する処理が提供されている場合はいくらでも変更が可能となります。

内部の状態を書き換える機能を持つ既存のクラスのオブジェクトを定数として扱いたい場合はいったんそれを諦め、その既存のクラスのなかで定数として必要なものだけを取り出し、列挙型（`enum`）とするなどの対策が必要です。  
（定数という性質上、それが不可能ということはないはずです。）