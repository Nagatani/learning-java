---
title: パッケージとimport
---


# パッケージ

Javaでは、クラス名が被ってしまうとコンパイルができなくなってしまいます。
クラス名は、そのクラスを表現する名前を付けることが望ましいため、場合によっては標準搭載されたクラスライブラリと被ってしまうこともあります。クラス名が被らないようにクラス名を長くすることもできますが、それではソースコードの可読性が悪くなってしまうおそれがあります。
そのため、Javaにはこれを避けるための仕組みが用意されています。

それが、パッケージ（package）と呼ばれるものです。

## パッケージとは

クラスをグループにまとめるものです。

たとえば、独自に作成するアプリケーションにおいてシステムを表すクラスに「`System`」という名前を付けたいとします。しかし、Javaではすでに`System`クラスが用意されているため、この`System`という名前をクラス名として使うことはできません。

こんなときは独自のパッケージ`hoge`を用意し、`System`クラスを`hoge`パッケージ以下へ含めるようにします。

こうするとシステムを表すクラス名は`hoge.System`となります。この結果、自分で作成した`hoge.System`とJavaで用意されている`System`とは明確に区別できます。

このようにJavaが提供しているクラス以外に独自に作成したクラスについてはパッケージを作ってまとめておくと、同じ名前のクラスも使えますし、既存のクラスと簡単に区別をつけることもできます。

## パッケージ名とディレクトリツリー

パッケージは、パッケージ名にて`.`で区切られる部分がディレクトリの階層を分けます。

パッケージを設定している場合は、パッケージ名に従ったディレクトリツリー上にソースコード、クラスファイルが格納される必要があります。

たとえば、`learning.java.sample`というパッケージを作成しクラスを追加した場合は、`learning`ディレクトリ→`java`ディレクトリ→`sample`ディレクトリ→クラスファイルといった階層構造を維持したクラスファイルを存在させる必要があります。

## パッケージの命名規則

インターネットなどで公開するクラスライブラリでは、パッケージ名自体が被ってしまうことも考えられます。

Javaの言語仕様では、URLなどで指定するドメイン名をパッケージ名に使用すると明記されています。
インターネットに公開しない場合の命名規則については言及がないため自由で良いようです。

ドメイン名を使用するとは、たとえば`sample.co.jp`のドメインを持つ企業がクラスライブラリを作成した場合には、そのクラスライブラリのパッケージ名は`jp.co.sample.クラスライブラリ名`となります。  
書き方としては、ドメインの逆から並べて書きます。  
参考: Java SE 17言語仕様の名前に関する記述[https://docs.oracle.com/javase/specs/jls/se17/html/jls-6.html#jls-6.1](https://docs.oracle.com/javase/specs/jls/se17/html/jls-6.html#jls-6.1)

ただし、この仕様にしたがわないと使えないかというとそうではありません。
とくに学内や企業内だけで使用するようなライブラリの場合は、ドメインからパッケージ名でなくても良いですし、実際にインターネット上で配布されているライブラリには、ドメインをパッケージ名としていないライブラリが多数存在しています。
何に従えば良いか分からなくなってしまいますが、Javaの言語仕様に定められた命名規則にしたがっておき、ドメインなどがない場合は他と被らないパッケージ名を選べるように慎重に調査しましょう。

また、パッケージ名は**すべて小文字**としておきましょう。

自分の作成したクラスを他人に使ってもらう際には、適切なパッケージを命名して扱いやすくなるようにクラスをまとめておきましょう。

----

# パッケージを省略して書くためのimport構文

クラスライブラリのクラスを自分のプログラムで使用するためには、`パッケージ名.クラス名`という書き方をすればクラスライブラリのクラスを使用する事ができますが、使用頻度の高いクラスに関しては、冗長になってしまいコードが見難くなります。

そのときは、クラスの宣言文の前にimport構文を用いることで、`パッケージ名.クラス名`をクラス名だけで使用できるように短縮して表記できます。

import構文は以下の通りです。

```java
//クラス指定のインポート
import パッケージ名.クラス名;
//パッケージに含まれるクラスすべてをインポート
import パッケージ名.*;
```

## パッケージとアクセス制限
アクセス修飾子の復習です。


| アクセス修飾子 | 制限範囲(どこからアクセスできるか) |
|-------------|------------------------------|
| public | どこからでもアクセス可能 |
| 指定なし | 同じパッケージ内からのみ |
| protected | 同じパッケージ内からと、サブクラスからのみ |
| private | そのクラス内からのみ |

protectedを指定している場合は、継承するサブクラス以外では異なるパッケージからアクセスすることができなくなります。

## クラスライブラリ使用時のimport構文の目的
クラスライブラリを使用する際にパッケージ名をすべて書かなくてもクラス名のみで使用する事ができるようにする宣言です。

## 完全限定名
`パッケージ名.クラス名`とすると、import構文でパッケージを指定しなくても、使用する事ができます。

```
例) java.util.regex.Pattern , java.util.Random など
```

完全限定名は、その長さからソースコードの可読性を下げかねません。  
複数箇所で完全限定名を使用するようなことになる場合は、import構文を書いたほうがよいでしょう。

## オンデマンドインポート
import構文にて、クラス名を指定する代わりに「`*`（アスタリスク）」を使用することで、指定したパッケージにあるクラスすべてをimportできます。

```
例) import java.util.*;
```

## import文が足りない場合のエラー

「名前解決ができません」等のエラーが出ている場合には、import構文を確認してください。
もし、自分が書いたコード中に、Javaの標準ではimportされないライブラリを使用している場合、import構文により指定がなければ完全限定名を使用する必要のあるものが含まれていることがあります。

また、単純に「名前解決ができません」のエラーの中には、変数宣言が未定義状態だったり、クラス名を間違えて記述していたりする場合もあります。
エラーの該当箇所をよく見て判断してください。

## import構文の注意点

以下のソースコードでは、コンパイルエラーとなります。

```java
package sample;
import java.awt.*;
import java.util.*;

public class ImportListSample {
    List list;
}
```

上記例では、importしている`java.awt`パッケージ、`java.util`パッケージのどちらにも`List`クラスが存在しています。

このままでは、ImportListSampleクラスのフィールドとして書いた`List`が、`java.awt`パッケージ、`java.util`パッケージのどちらのパッケージのクラスか判断できません。

これを修正するには、以下のようにimport構文を使用しないで完全限定名を使用するようにしましょう。

```java
package sample;
import java.awt.*;

public class ImportListSample {
    java.util.List list;    //java.utilパッケージのListを使用する
}
```

## パッケージのまとめ
- クラスを役割や機能ごとにまとめることができる
    + そのクラスの役割や機能を把握しやすくさせる
- 同じ名前のクラスは、異なるパッケージにあれば作成できる
- アクセス修飾子により、アクセス制限を設けられる
